# Linuxシステム[実践]入門

知らなかった内容の中で、以下の３つをまとめました。

- 後で必要になりそうなところ

- 重要なところ

- 最低限知るべきこと

## 第１章 Linuxの基礎知識

#### とくに役に立たないUnix豆知識

昔は利用ユーザーごとに利用時間で課金していた。
この利用時間を記録するために利用履歴のログをとっていた。
システムの利用を開始するとログの記録が開始されるのでログインと呼ばれるようになった。

#### シェルとは

シェルはコマンド実行し表示するプログラム。

#### man

マニュアルを表示するコマンド。
CentOSにデフォルトでは入っていない。

#### パーミッション

対象は所有者、グループ、その他の３種
権限の種類は読み書き実行の３種
read/write/execute

#### ファイル

1byte = 8bit
8個の0 or 1で構成される。
２＾８通りの表現が可能。
ASCIIコードはラテン文字を中心とした文字コード。
文字種が少ないのでシングルバイト。

#### Linuxディレクトリ構成

|ディレクトリ|概要|
|:---|:----------------------------------|
|boot|Linuxカーネルとかが入っている           |
|etc |設定ファイルを格納するディレクトリ          |
|bin |コマンドが配置されている                |
|sbin|システム管理者用コマンド                |
|usr |ユーザー共有データ                    |
|home|ユーザーディレクトリ                    |
|var |変わりやすいデータが入る(tmp, logとか)  |
|proc|プロセス操作の手段を提供(kill pkillとか)|
|sys |デバイス情報を提供                    |
|dev |デバイスファイルを配置                 |
|tmp |作業ファイルなどを配置                 |

[？] varとtmpの違いをいまいち理解できていない

## 第２章 シェル

### シェルについて

あらかじめコマンドを記述したスクリプトを読み込ませてそれを実行する。
そのスクリプトがシェルスクリプト。

Linuxには複数のシェルが存在している。
それぞれ文法が微妙に異なるので注意。

##### サスペンド化・フォアグラウンド化

vimとかシェルから離れるやつはCtrl + zでサスペンドさせることができる
サスペンドしたやつはあとからfgコマンドの引数にジョブ番号を指定して中断した状態で起動できる

##### リダイレクトとパイプ

|動作名称|記号|タイプ|
|:-|:-|:-|
|標準出力|>|リダイレクト|
|標準エラー出力|>>|リダイレクト|
|標準入力|<|パイプ|

- 標準出力
プログラムの出力を別のファイルに書き込む

- 標準エラー出力

- 標準出力標準出力 + 画面表示

address.txtから入力してaddress2.txtに出力する例

`
$ sed -e "s/perl/ruby/g" < address.txt > address2.txt
`

## シェルコマンド

### ビルトインコマンド

シェル自体が持っているコマンド

|コマンド|動作|
|:-|:-|
|source|他のシェルスクリプトを読み込む|
|eval|パラメータの間接参照、入れ子になった変数の値を参照|
|export|シェル変数を環境変数にする|


## シェルスクリプトの文法

シェルスクリプトの#はコメントではない
実行するシェルを指定している

`
hello.sh
`
```
#!/bin/sh
echo "hello"
```

実行方法

`
$ ./hello.sh
`

./はカレントディレクトリ

### シェルの変数

|変数        |備考                       |
|:--------- |:--------------------------|
|環境変数    |exportで入れる               |
|位置パラメータ|コマンドライン引数みたいな感じで入力|

### 条件分岐

if for while case
普通のプログラミング言語のようにかける。

### シェル関数

function文で関数を作れる

バッククォート「`」
これで囲むとコマンドとして実行され出力される

## シェルの種類

##### ログインシェル

ユーザーの環境を作成するときに使われる

##### 対話シェル

ログインシェルではないシェル
ホームディレクトリの.bashrcを読み込む

# 第３章 Linuxカーネル

#### カーネルの機能

- デバイス管理
- プロセス管理
- メモリ管理
- システムコールの提供

##### プロセス管理

メモリに配置されたプログラムはプロセスになる

##### メモリ管理

メモリ領域を振ったりスワップさせたり

#### システム起動するまでの仕組み

↓ BIOS
↓ MBR
↓ ブートローダ (カーネル実行するプログラム)

#### straceコマンド

動作を追うことができる
CentOSにはデフォルトで入っていない

## 第４章 X Window System

よくわかりません(> _ <)
これが元になって現在のGUIシステムが構成されてる感じ？

## 第5章 スクリプトとシステム設定ファイル

sysvinit
起動ツールパッケージ

upstart
sysvinitを置き換える
Ubuntuプロジェクトを中心に開発が進んでいる

systemd
sysvinitを置き換えるinitデーモン

特徴
処理の並列化
アプリケーション間のプロセス通信を利用したサービスの起動

### パケットフィルタリング

iptableを用いてパケットヘッダを元にフィルタリングする


## 第６章 アプリケーションサーバー

- ### Samba

  WindowsとLinuxの間でファイル共有とか認証とか名前解決とかしてくれる

- ### WebDAV

  ファイルの編集管理を複数人で行えるように拡張したHTTPプロトコル
  Apacheに標準搭載されている

## 第７章 システム管理

- ### syslogd

  ログを残すデーモン
  ファシリティとプライオリティを設定することでログの出力先をカスタマイズできる

- ### cron

  決められた時間にコマンドを実行するデーモン

  - ##### ログローテーション

    ログファイルが大きくなりすぎてそれ以上書き込めなくなるのをふせぐ

- ### at

  cronが定期的なのに対してこれは１回限り


